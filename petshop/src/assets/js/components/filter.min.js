/*! UIkit 3.16.3 | https://www.getuikit.com | (c) 2014 - 2023 YOOtheme | MIT License */(function(e,y){typeof exports=="object"&&typeof module<"u"?module.exports=y(require("uikit-util")):typeof define=="function"&&define.amd?define("uikitfilter",["uikit-util"],y):(e=typeof globalThis<"u"?globalThis:e||self,e.UIkitFilter=y(e.UIkit.util))})(this,function(e){"use strict";function y(s){return A(s,"top","bottom")}function A(s,n,o){const t=[[]];for(const r of s){if(!e.isVisible(r))continue;let a=w(r);for(let c=t.length-1;c>=0;c--){const f=t[c];if(!f[0]){f.push(r);break}let h;if(f[0].offsetParent===r.offsetParent?h=w(f[0]):(a=w(r,!0),h=w(f[0],!0)),a[n]>=h[o]-1&&a[n]!==h[n]){t.push([r]);break}if(a[o]-1>h[n]||a[n]===h[n]){f.push(r);break}if(c===0){t.unshift([r]);break}}}return t}function w(s,n=!1){let{offsetTop:o,offsetLeft:t,offsetHeight:r,offsetWidth:a}=s;return n&&([o,t]=e.offsetPosition(s)),{top:o,left:t,bottom:o+r,right:t+a}}const g="uk-transition-leave",T="uk-transition-enter";function $(s,n,o,t=0){const r=u(n,!0),a={opacity:1},c={opacity:0},f=m=>()=>r===u(n)?m():Promise.reject(),h=f(async()=>{e.addClass(n,g),await Promise.all(P(n).map((m,l)=>new Promise(d=>setTimeout(()=>e.Transition.start(m,c,o/2,"ease").then(d),l*t)))),e.removeClass(n,g)}),i=f(async()=>{const m=e.height(n);e.addClass(n,T),s(),e.css(e.children(n),{opacity:0}),await B();const l=e.children(n),d=e.height(n);e.css(n,"alignContent","flex-start"),e.height(n,m);const p=P(n);e.css(l,c);const x=p.map(async(G,J)=>{await q(J*t),await e.Transition.start(G,a,o/2,"ease")});m!==d&&x.push(e.Transition.start(n,{height:d},o/2+p.length*t,"ease")),await Promise.all(x).then(()=>{e.removeClass(n,T),r===u(n)&&(e.css(n,{height:"",alignContent:""}),e.css(l,{opacity:""}),delete n.dataset.transition)})});return e.hasClass(n,g)?v(n).then(i):e.hasClass(n,T)?v(n).then(h).then(i):h().then(i)}function u(s,n){return n&&(s.dataset.transition=1+u(s)),e.toNumber(s.dataset.transition)||0}function v(s){return Promise.all(e.children(s).filter(e.Transition.inProgress).map(n=>new Promise(o=>e.once(n,"transitionend transitioncanceled",o))))}function P(s){return y(e.children(s)).reduce((n,o)=>n.concat(e.sortBy(o.filter(t=>e.isInView(t)),"offsetLeft")),[])}function B(){return new Promise(s=>requestAnimationFrame(s))}function q(s){return new Promise(n=>setTimeout(n,s))}async function N(s,n,o){await I();let t=e.children(n);const r=t.map(d=>S(d,!0)),a={...e.css(n,["height","padding"]),display:"block"};await Promise.all(t.concat(n).map(e.Transition.cancel)),s(),t=t.concat(e.children(n).filter(d=>!e.includes(t,d))),await Promise.resolve(),e.fastdom.flush();const c=e.attr(n,"style"),f=e.css(n,["height","padding"]),[h,i]=H(n,t,r),m=t.map(d=>({style:e.attr(d,"style")}));t.forEach((d,p)=>i[p]&&e.css(d,i[p])),e.css(n,a),e.trigger(n,"scroll"),e.fastdom.flush(),await I();const l=t.map((d,p)=>e.parent(d)===n&&e.Transition.start(d,h[p],o,"ease")).concat(e.Transition.start(n,f,o,"ease"));try{await Promise.all(l),t.forEach((d,p)=>{e.attr(d,m[p]),e.parent(d)===n&&e.css(d,"display",h[p].opacity===0?"none":"")}),e.attr(n,"style",c)}catch{e.attr(t,"style",""),L(n,a)}}function S(s,n){const o=e.css(s,"zIndex");return e.isVisible(s)?{display:"",opacity:n?e.css(s,"opacity"):"0",pointerEvents:"none",position:"absolute",zIndex:o==="auto"?e.index(s):o,...b(s)}:!1}function H(s,n,o){const t=n.map((a,c)=>e.parent(a)&&c in o?o[c]?e.isVisible(a)?b(a):{opacity:0}:{opacity:e.isVisible(a)?1:0}:!1),r=t.map((a,c)=>{const f=e.parent(n[c])===s&&(o[c]||S(n[c]));if(!f)return!1;if(!a)delete f.opacity;else if(!("opacity"in a)){const{opacity:h}=f;h%1?a.opacity=1:delete f.opacity}return f});return[t,r]}function L(s,n){for(const o in n)e.css(s,o,"")}function b(s){const{height:n,width:o}=e.offset(s);return{height:n,width:o,transform:"",...e.position(s),...e.css(s,["marginTop","marginLeft"])}}function I(){return new Promise(s=>requestAnimationFrame(s))}var O={props:{duration:Number,animation:Boolean},data:{duration:150,animation:"slide"},methods:{animate(s,n=this.$el){const o=this.animation;return(o==="fade"?$:o==="delayed-fade"?(...r)=>$(...r,40):o?N:()=>(s(),Promise.resolve()))(s,n,this.duration).catch(e.noop)}}};const V={TAB:9,ESC:27,SPACE:32,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40};var C={mixins:[O],args:"target",props:{target:Boolean,selActive:Boolean},data:{target:null,selActive:!1,attrItem:"uk-filter-control",cls:"uk-active",duration:250},computed:{toggles:{get({attrItem:s},n){return e.$$(`[${s}],[data-${s}]`,n)},watch(s){this.updateState();const n=e.$$(this.selActive,this.$el);for(const o of s){this.selActive!==!1&&e.toggleClass(o,this.cls,e.includes(n,o));const t=R(o);e.isTag(t,"a")&&e.attr(t,"role","button")}},immediate:!0},children:{get({target:s},n){return e.$$(`${s} > *`,n)},watch(s,n){n&&this.updateState()},immediate:!0}},events:[{name:"click keydown",delegate(){return`[${this.attrItem}],[data-${this.attrItem}]`},handler(s){s.type==="keydown"&&s.keyCode!==V.SPACE||e.closest(s.target,"a,button")&&(s.preventDefault(),this.apply(s.current))}}],methods:{apply(s){const n=this.getState(),o=F(s,this.attrItem,this.getState());D(n,o)||this.setState(o)},getState(){return this.toggles.filter(s=>e.hasClass(s,this.cls)).reduce((s,n)=>F(n,this.attrItem,s),{filter:{"":""},sort:[]})},async setState(s,n=!0){s={filter:{"":""},sort:[],...s},e.trigger(this.$el,"beforeFilter",[this,s]);for(const o of this.toggles)e.toggleClass(o,this.cls,M(o,this.attrItem,s));await Promise.all(e.$$(this.target,this.$el).map(o=>{const t=()=>{z(s,o,e.children(o)),this.$update(this.$el)};return n?this.animate(t,o):t()})),e.trigger(this.$el,"afterFilter",[this])},updateState(){e.fastdom.write(()=>this.setState(this.getState(),!1))}}};function E(s,n){return e.parseOptions(e.data(s,n),["filter"])}function D(s,n){return["filter","sort"].every(o=>e.isEqual(s[o],n[o]))}function z(s,n,o){const t=W(s);o.forEach(c=>e.css(c,"display",t&&!e.matches(c,t)?"none":""));const[r,a]=s.sort;if(r){const c=j(o,r,a);e.isEqual(c,o)||e.append(n,c)}}function F(s,n,o){const{filter:t,group:r,sort:a,order:c="asc"}=E(s,n);return(t||e.isUndefined(a))&&(r?t?(delete o.filter[""],o.filter[r]=t):(delete o.filter[r],(e.isEmpty(o.filter)||""in o.filter)&&(o.filter={"":t||""})):o.filter={"":t||""}),e.isUndefined(a)||(o.sort=[a,c]),o}function M(s,n,{filter:o={"":""},sort:[t,r]}){const{filter:a="",group:c="",sort:f,order:h="asc"}=E(s,n);return e.isUndefined(f)?c in o&&a===o[c]||!a&&c&&!(c in o)&&!o[""]:t===f&&r===h}function W({filter:s}){let n="";return e.each(s,o=>n+=o||""),n}function j(s,n,o){return[...s].sort((t,r)=>e.data(t,n).localeCompare(e.data(r,n),void 0,{numeric:!0})*(o==="asc"||-1))}function R(s){return e.$("a,button",s)||s}return typeof window<"u"&&window.UIkit&&window.UIkit.component("filter",C),C});
